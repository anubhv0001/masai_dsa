<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Movie search(Dashboard)</h2>
    <input type="text"id="searchInput"placeholder="Type movie name">
    <div id="results"></div>
    <script>
        const input=document.getElementById("searchInput");
        const resultsDiv=document.getElementById("results");
        let timeoutId;
        function debounce(func,delay){
            return  function(...args){
                clearTimeout(timeoutId);
                timeoutId=setTimeout(()=>{
                    func.apply(this,args);
                },delay)
            }
        }
        async function fetchMovies(query){
            if (!query){
                resultsDiv.innerHTML="";
                return;
            }
            try{
            const res=await fetch(`https://www.omdbapi.com/?apikey=8e9d724a&s=${query}`);

                const data=await res.json();

                if (data.Response==="True"){
                    displayMovies(data.Search);
                }
                else{
                    resultsDiv.innerHTML=`<p>No result found</p>`
                }
            }
            catch(err){
                console.log("Error fetching data:",err);
                  resultsDiv.innerHTML = `<p>Error fetching results</p>`;
            }
        }
        function displayMovies(movies){
            resultsDiv.innerHTML="";
            movies.forEach( movie => {
                const div=document.createElement("div");
                div.className="movie-title";
                div.textContent=`${movie.Title}(${movie.Year})`;
                resultsDiv.appendChild(div)
            });
        }
        const debouncedSearch=debounce(function(){
            const query=input.value.trim();
            fetchMovies(query);
        },500)
        input.addEventListener("input",debouncedSearch)
    </script>

</body>
</html>